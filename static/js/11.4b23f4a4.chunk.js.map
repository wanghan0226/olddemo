{"version":3,"sources":["layout/BaseLayout.tsx","assets/dh_jh.png","assets/compLogo.png"],"names":["Header","Content","Footer","Sider","SubMenu","TabPane","treeToPath","tree","result","arguments","length","undefined","parent","map","i","push","name","path","routes","BaseLayout","state","collapsed","menu","toggle","_this","setState","handleSelect","select","props","history","key","handleChangeMenu","handleClickItem","item","handleClickTab","val","active","_this$props","dispatch","menuTabs","activeArr","filter","list","x","type","data","hasOwnProperty","handleEdit","targetKey","action","_this$props2","index","y","initTabContain","location","pathname","_this2","this","hideMenu","_this3","_this$props3","children","_this$state","defaultOpenKeys","defaultSelectedKeys","react__WEBPACK_IMPORTED_MODULE_13___default","a","createElement","antd_es_layout__WEBPACK_IMPORTED_MODULE_12__","className","collapsible","style","textAlign","padding","src","require","alt","antd_es_menu__WEBPACK_IMPORTED_MODULE_10__","theme","mode","onSelect","selectedKeys","title","icon","antd_es_icon__WEBPACK_IMPORTED_MODULE_1__","Item","onClick","bind","background","fontSize","color","verticalAlign","width","float","marginRight","marginTop","antd_es_tabs__WEBPACK_IMPORTED_MODULE_8__","hideAdd","onTabClick","onEdit","activeKey","tab","closable","Component","connect","withRouter","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/11.4b23f4a4.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Dispatch } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport { Layout, Menu, Tabs, Icon } from 'antd';\r\nimport { SelectParam } from 'antd/lib/menu';\r\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\r\n\r\nimport { IMenuTabs } from '@/store';\r\nimport menu from '@/route/router';\r\n\r\nimport './BaseLayout.less';\r\n\r\ninterface IMenuItem {\r\n  name?: string;\r\n  path: string;\r\n  icon?: string;\r\n  hideMenu?: boolean;\r\n  routes?: IMenuItem[];\r\n}\r\n\r\ninterface IProps {\r\n  dispatch: Dispatch;\r\n  menuTabs: IMenuTabs;\r\n}\r\n\r\ninterface IState {\r\n  collapsed: boolean;\r\n  menu?: IMenuItem[];\r\n}\r\n\r\nconst { Header, Content, Footer, Sider } = Layout;\r\nconst { SubMenu } = Menu;\r\nconst { TabPane } = Tabs;\r\n\r\nconst treeToPath = (tree: IMenuItem[], result: any = [], parent?: IMenuItem) => {\r\n  tree.map((i: IMenuItem) => {\r\n    if (parent) {\r\n      result.push({ name: i.name, path: i.path, parent: { name: parent.name, path: parent.path } });\r\n    } else {\r\n      result.push({ name: i.name, path: i.path });\r\n    }\r\n    if (i.routes && i.routes.length) {\r\n      treeToPath(i.routes, result, i);\r\n    }\r\n  });\r\n  return result;\r\n};\r\n\r\nclass BaseLayout extends Component<RouteComponentProps & IProps, IState> {\r\n  public state = {\r\n    collapsed: false,\r\n    menu: []\r\n  };\r\n  public componentDidMount() {\r\n    this.setState(\r\n      {\r\n        menu: menu.filter((i: IMenuItem) => !i.hideMenu)\r\n      },\r\n      () => {\r\n        this.initTabContain();\r\n      }\r\n    );\r\n  }\r\n  /**\r\n   * toggle\r\n   */\r\n  public toggle = () => {\r\n    this.setState({\r\n      collapsed: !this.state.collapsed\r\n    });\r\n  };\r\n  /**\r\n   * handleSelect\r\n   */\r\n  public handleSelect = (select: SelectParam) => {\r\n    const { history } = this.props;\r\n    history.push(select.key);\r\n    this.handleChangeMenu(select.key);\r\n  };\r\n  /**\r\n   * handleClickItem\r\n   */\r\n  public handleClickItem = (item: IMenuItem) => {\r\n    const { history } = this.props;\r\n    history.push(item.path);\r\n    this.handleChangeMenu(item.path);\r\n  };\r\n  /**\r\n   * handleClick\r\n   */\r\n  public handleClickTab = (val: string) => {\r\n    const { history } = this.props;\r\n    history.push(val);\r\n    this.handleChangeMenu(val);\r\n  };\r\n  /**\r\n   * handleChangeMenu\r\n   */\r\n  public handleChangeMenu = (val: string) => {\r\n    const { dispatch, menuTabs } = this.props;\r\n    const { menu } = this.state;\r\n    let menuArr = treeToPath(menu);\r\n    let activeArr = menuArr.filter((i: IMenuItem) => i.path === val);\r\n    let list = menuTabs.list,\r\n      active: any;\r\n    if (activeArr.length > 0) {\r\n      active = activeArr[0];\r\n      if (list.filter(x => x.path === active.path).length === 0) {\r\n        list.push(active);\r\n      }\r\n      dispatch({\r\n        type: 'MENU_TABS',\r\n        data: {\r\n          active,\r\n          parent: active.parent && active.parent.hasOwnProperty('name') ? { name: active.parent.name, path: active.parent.path } : {},\r\n          list\r\n        }\r\n      });\r\n    }\r\n  };\r\n  /**\r\n   * handleEdit\r\n   */\r\n  public handleEdit = (targetKey: unknown, action: 'add' | 'remove') => {\r\n    const { history, dispatch, menuTabs } = this.props;\r\n    if (action === 'remove') {\r\n      let { active, parent, list } = menuTabs;\r\n      if (active.path === targetKey) {\r\n        let index = 0;\r\n        list.map((x, y) => {\r\n          if (x.path === targetKey) index = y;\r\n        });\r\n        active = list[index - 1];\r\n        list = list.filter((x: any) => x.path !== targetKey);\r\n        parent = active.parent && active.parent.hasOwnProperty('name') ? { name: active.parent.name, path: active.parent.path } : ({} as any);\r\n        // console.log(active, list, parent);\r\n      } else {\r\n        list = list.filter((x: any) => x.path !== targetKey);\r\n      }\r\n      dispatch({\r\n        type: 'MENU_TABS',\r\n        data: {\r\n          active,\r\n          parent,\r\n          list\r\n        }\r\n      });\r\n      history.push(active.path);\r\n    }\r\n  };\r\n  /**\r\n   * initTabContain\r\n   */\r\n  public initTabContain = () => {\r\n    const { location } = this.props;\r\n    this.handleChangeMenu(location.pathname);\r\n  };\r\n  public render() {\r\n    const { children, location, menuTabs } = this.props;\r\n    const { collapsed, menu } = this.state;\r\n    let defaultOpenKeys: string[] = [];\r\n    let defaultSelectedKeys: string[] = [];\r\n    if (menuTabs.parent && menuTabs.parent.path) {\r\n      defaultOpenKeys = [menuTabs.parent.path];\r\n    }\r\n    if (menuTabs.active && menuTabs.active.path) {\r\n      defaultSelectedKeys = [menuTabs.active.path];\r\n    }\r\n    // console.log(defaultOpenKeys, defaultSelectedKeys);\r\n    return (\r\n      <Layout className=\"layout\">\r\n        <Sider collapsible={false} collapsed={collapsed}>\r\n          <div style={{ textAlign: 'center', padding: '10px 0 10px 0' }}>\r\n            <img src={require('@/assets/dh_jh.png')} alt=\"logo\" />\r\n          </div>\r\n          <Menu\r\n            theme=\"dark\"\r\n            mode=\"inline\"\r\n            onSelect={this.handleSelect}\r\n            defaultOpenKeys={defaultOpenKeys}\r\n            defaultSelectedKeys={defaultSelectedKeys}\r\n            selectedKeys={defaultSelectedKeys}\r\n          >\r\n            {menu &&\r\n              menu.map((x: IMenuItem) => (\r\n                <SubMenu\r\n                  key={x.path}\r\n                  title={\r\n                    <span>\r\n                      {x.icon && <Icon type={x.icon} />}\r\n                      <span>{x.name}</span>\r\n                    </span>\r\n                  }\r\n                >\r\n                  {x.routes &&\r\n                    x.routes.map((i: IMenuItem) => (\r\n                      <Menu.Item key={i.path} onClick={this.handleClickItem.bind(this, i, x)}>\r\n                        {i.name}\r\n                      </Menu.Item>\r\n                    ))}\r\n                </SubMenu>\r\n              ))}\r\n            {/* <SubMenu\r\n              key=\"sub1\"\r\n              title={\r\n                <span>\r\n                  <Icon type=\"minus-square\" />\r\n                  <span>违法确认</span>\r\n                </span>\r\n              }\r\n            >\r\n              <Menu.Item key=\"/illegal/info\">违法信息确认</Menu.Item>\r\n              <Menu.Item key=\"/illegal/setting\">设备设置</Menu.Item>\r\n            </SubMenu>\r\n            <SubMenu\r\n              key=\"sub2\"\r\n              title={\r\n                <span>\r\n                  <Icon type=\"minus-square\" />\r\n                  <span>统计分析</span>\r\n                </span>\r\n              }\r\n            >\r\n            </SubMenu>\r\n            <SubMenu\r\n              key=\"sub3\"\r\n              title={\r\n                <span>\r\n                  <Icon type=\"minus-square\" />\r\n                  <span>系统管理</span>\r\n                </span>\r\n              }\r\n            >\r\n            </SubMenu> */}\r\n          </Menu>\r\n        </Sider>\r\n        <Layout>\r\n          <Header style={{ background: '#fff', padding: 0 }}>\r\n            <Icon className=\"trigger\" type={this.state.collapsed ? 'menu-unfold' : 'menu-fold'} onClick={this.toggle} />\r\n            <span style={{ fontSize: 30, color: 'white', verticalAlign: 'middle' }}>违法鸣笛抓拍管理平台</span>\r\n            <img src={require('@/assets/compLogo.png')} alt=\"logo\" style={{width: 200,float: 'right',marginRight:40,marginTop:15}}/>\r\n          </Header>\r\n          <Content className=\"content\">\r\n            <Tabs className=\"layout-tabs\" hideAdd={true} type=\"editable-card\" onTabClick={this.handleClickTab} onEdit={this.handleEdit} activeKey={location.pathname}>\r\n              {menuTabs.list &&\r\n                menuTabs.list.map(i => (\r\n                  <TabPane tab={i.name} key={i.path} closable={i.path !== '/'}>\r\n                    <div className=\"layout-main\">{children}</div>\r\n                  </TabPane>\r\n                ))}\r\n            </Tabs>\r\n            <Footer style={{ textAlign: 'center' }}>\r\n              Copyright ©2018 ITS MANAGEMENT SYSTEM. ALL Right Reserved <br />\r\n              Powerd by Aoxing Technology Co., Ltd.\r\n            </Footer>\r\n          </Content>\r\n        </Layout>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(state => state)(withRouter(BaseLayout));\r\n","module.exports = __webpack_public_path__ + \"static/media/dh_jh.cbbbe7b2.png\";","module.exports = __webpack_public_path__ + \"static/media/compLogo.c8d66bf3.png\";"],"sourceRoot":""}